<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="simd-json is a rust port of the simdjson c++ library. It follows most of the design closely with a few exceptions to make it better fit into the rust ecosystem."><title>simd_json - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-b25d77b18a16a9a4.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="simd_json" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0-nightly (6de928dce 2024-08-18)" data-channel="nightly" data-search-js="search-ef54e092fea9c776.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-cb0df477c2d67d00.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../simd_json/index.html">simd_<wbr>json</a><span class="version">0.13.10</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Aliases</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">simd_json</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/simd_json/lib.rs.html#1-1178">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>simd-json is a rust port of the simdjson c++ library. It follows
most of the design closely with a few exceptions to make it better
fit into the rust ecosystem.</p>
<p>Note: On <code>x86</code> it will select the best SIMD featureset
(<code>avx2</code>, or <code>sse4.2</code>) during runtime. If <code>simd-json</code> is compiled
with SIMD support, it will disable runtime detection.</p>
<h3 id="goals"><a class="doc-anchor" href="#goals">§</a>Goals</h3>
<p>the goal of the rust port of simdjson is not to create a one to
one copy, but to integrate the principles of the c++ library into
a rust library that plays well with the rust ecosystem. As such
we provide both compatibility with serde as well as parsing to a
dom to manipulate data.</p>
<h3 id="performance"><a class="doc-anchor" href="#performance">§</a>Performance</h3>
<p>As a rule of thumb this library tries to get as close as possible
to the performance of the c++ implementation, but some of the
design decisions - such as parsing to a dom or a tape, weigh
ergonomics over performance. In other places Rust makes it harder
to achieve the same level of performance.</p>
<h3 id="safety"><a class="doc-anchor" href="#safety">§</a>Safety</h3>
<p>this library uses unsafe all over the place, and while it leverages
quite a few test cases along with property based testing, please use
this library with caution.</p>
<h3 id="features"><a class="doc-anchor" href="#features">§</a>Features</h3>
<p>simd-json.rs comes with a number of features that can be toggled,
the following features are intended for ‘user’ selection. Additional
features in the <code>Cargo.toml</code> exist to work around cargo limitations.</p>
<h4 id="swar-number-parsing-default"><a class="doc-anchor" href="#swar-number-parsing-default">§</a><code>swar-number-parsing</code> (default)</h4>
<p>Enables a parsing method that will parse 8 digits at a time for
floats - this is a common pattern but comes as a slight perf hit
if all the floats have less then 8 digits.</p>
<h4 id="serde_impl-default"><a class="doc-anchor" href="#serde_impl-default">§</a><code>serde_impl</code> (default)</h4>
<p>Compatibility with <a href="https://serde.rs/">serde</a>. This allows to use
<a href="https://simd-json.rs">simd-json.rs</a> to deserialize serde objects
as well as serde compatibility of the different Value types.
This can be disabled if serde is not used alongside simd-json.</p>
<h4 id="128bit"><a class="doc-anchor" href="#128bit">§</a><code>128bit</code></h4>
<p>Support for signed and unsigned 128 bit integer. This feature
is disabled by default as 128 bit integers are rare in the wild
and parsing them comes as a performance penalty due to extra logic
and a changed memory layout.</p>
<h4 id="known-key"><a class="doc-anchor" href="#known-key">§</a><code>known-key</code></h4>
<p>The known-key feature changes hasher for the objects, from ahash
to fxhash, ahash is faster at hashing and provides protection
against DOS attacks by forcing multiple keys into a single hashing
bucket. fxhash on the other hand allows for repeatable hashing
results, that allows memorizing hashes for well know keys and saving
time on lookups. In workloads that are heavy at accessing some well
known keys this can be a performance advantage.</p>
<h3 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h3>
<p>simd-json offers two main entry points for usage:</p>
<h4 id="values-api"><a class="doc-anchor" href="#values-api">§</a>Values API</h4>
<p>The values API is a set of optimized DOM objects that allow parsed
json to JSON data that has no known variable structure. simd-lite
has two versions of this:</p>
<p><strong>Borrowed Values</strong></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>simd_json;
<span class="kw">let </span><span class="kw-2">mut </span>d = <span class="string">br#"{"some": ["key", "value", 2]}"#</span>.to_vec();
<span class="kw">let </span>v: simd_json::BorrowedValue = simd_json::to_borrowed_value(<span class="kw-2">&amp;mut </span>d).unwrap();</code></pre></div>
<p><strong>Owned Values</strong></p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>simd_json;
<span class="kw">let </span><span class="kw-2">mut </span>d = <span class="string">br#"{"some": ["key", "value", 2]}"#</span>.to_vec();
<span class="kw">let </span>v: simd_json::OwnedValue = simd_json::to_owned_value(<span class="kw-2">&amp;mut </span>d).unwrap();</code></pre></div>
<h4 id="serde-compatible-api"><a class="doc-anchor" href="#serde-compatible-api">§</a>Serde Compatible API</h4>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">use </span>simd_json;
<span class="kw">use </span>serde_json::Value;

<span class="kw">let </span><span class="kw-2">mut </span>d = <span class="string">br#"{"some": ["key", "value", 2]}"#</span>.to_vec();
<span class="kw">let </span>v: Value = simd_json::serde::from_slice(<span class="kw-2">&amp;mut </span>d).unwrap();</code></pre></div>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.from_reader"><code>pub use crate::serde::<a class="fn" href="serde/fn.from_reader.html" title="fn simd_json::serde::from_reader">from_reader</a>;</code></div></li><li><div class="item-name" id="reexport.from_slice"><code>pub use crate::serde::<a class="fn" href="serde/fn.from_slice.html" title="fn simd_json::serde::from_slice">from_slice</a>;</code></div></li><li><div class="item-name" id="reexport.from_str"><code>pub use crate::serde::<a class="fn" href="serde/fn.from_str.html" title="fn simd_json::serde::from_str">from_str</a>;</code></div></li><li><div class="item-name" id="reexport.to_string"><code>pub use crate::serde::<a class="fn" href="serde/fn.to_string.html" title="fn simd_json::serde::to_string">to_string</a>;</code></div></li><li><div class="item-name" id="reexport.to_string_pretty"><code>pub use crate::serde::<a class="fn" href="serde/fn.to_string_pretty.html" title="fn simd_json::serde::to_string_pretty">to_string_pretty</a>;</code></div></li><li><div class="item-name" id="reexport.to_vec"><code>pub use crate::serde::<a class="fn" href="serde/fn.to_vec.html" title="fn simd_json::serde::to_vec">to_vec</a>;</code></div></li><li><div class="item-name" id="reexport.to_vec_pretty"><code>pub use crate::serde::<a class="fn" href="serde/fn.to_vec_pretty.html" title="fn simd_json::serde::to_vec_pretty">to_vec_pretty</a>;</code></div></li><li><div class="item-name" id="reexport.to_writer"><code>pub use crate::serde::<a class="fn" href="serde/fn.to_writer.html" title="fn simd_json::serde::to_writer">to_writer</a>;</code></div></li><li><div class="item-name" id="reexport.to_writer_pretty"><code>pub use crate::serde::<a class="fn" href="serde/fn.to_writer_pretty.html" title="fn simd_json::serde::to_writer_pretty">to_writer_pretty</a>;</code></div></li><li><div class="item-name" id="reexport.Node"><code>pub use crate::tape::<a class="enum" href="value/tape/enum.Node.html" title="enum simd_json::value::tape::Node">Node</a>;</code></div></li><li><div class="item-name" id="reexport.Tape"><code>pub use crate::tape::<a class="struct" href="value/tape/struct.Tape.html" title="struct simd_json::value::tape::Tape">Tape</a>;</code></div></li><li><div class="item-name"><code>pub use crate::<a class="mod" href="value/index.html" title="mod simd_json::value">value</a>::*;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="cow/index.html" title="mod simd_json::cow">cow</a></div><div class="desc docblock-short">Reexport of Cow
Reexport of Cow</div></li><li><div class="item-name"><a class="mod" href="prelude/index.html" title="mod simd_json::prelude">prelude</a></div><div class="desc docblock-short">Default trait imports;</div></li><li><div class="item-name"><a class="mod" href="serde/index.html" title="mod simd_json::serde">serde</a></div><div class="desc docblock-short">serde related helper functions</div></li><li><div class="item-name"><a class="mod" href="value/index.html" title="mod simd_json::value">value</a></div><div class="desc docblock-short">simd-json JSON-DOM value</div></li></ul><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.json.html" title="macro simd_json::json">json</a></div><div class="desc docblock-short">Taken from: <a href="https://github.com/serde-rs/json/blob/5b5f95831d9e0d769367b30b76a686339bffd209/src/macros.rs">https://github.com/serde-rs/json/blob/5b5f95831d9e0d769367b30b76a686339bffd209/src/macros.rs</a>
Construct a <code>simd_json::Value</code> from a JSON literal.</div></li><li><div class="item-name"><a class="macro" href="macro.json_typed.html" title="macro simd_json::json_typed">json_<wbr>typed</a></div><div class="desc docblock-short">Adapted from: <a href="https://github.com/serde-rs/json/blob/5b5f95831d9e0d769367b30b76a686339bffd209/src/macros.rs">https://github.com/serde-rs/json/blob/5b5f95831d9e0d769367b30b76a686339bffd209/src/macros.rs</a>
Constructs a <code>simd_json::Value</code> from a JSON literal and allows specifying whether it generates
an owned or borrowed variant.</div></li><li><div class="item-name"><a class="macro" href="macro.likely.html" title="macro simd_json::likely">likely</a></div><div class="desc docblock-short">possible compiler hint that a branch is likely</div></li><li><div class="item-name"><a class="macro" href="macro.static_cast_i8.html" title="macro simd_json::static_cast_i8">static_<wbr>cast_<wbr>i8</a></div><div class="desc docblock-short">static cast to an i8</div></li><li><div class="item-name"><a class="macro" href="macro.static_cast_i32.html" title="macro simd_json::static_cast_i32">static_<wbr>cast_<wbr>i32</a></div><div class="desc docblock-short">static cast to an i32</div></li><li><div class="item-name"><a class="macro" href="macro.static_cast_i64.html" title="macro simd_json::static_cast_i64">static_<wbr>cast_<wbr>i64</a></div><div class="desc docblock-short">static cast to an i64</div></li><li><div class="item-name"><a class="macro" href="macro.static_cast_i128.html" title="macro simd_json::static_cast_i128">static_<wbr>cast_<wbr>i128</a></div><div class="desc docblock-short">static cast to an i64</div></li><li><div class="item-name"><a class="macro" href="macro.static_cast_u32.html" title="macro simd_json::static_cast_u32">static_<wbr>cast_<wbr>u32</a></div><div class="desc docblock-short">static cast to an u32</div></li><li><div class="item-name"><a class="macro" href="macro.static_cast_u64.html" title="macro simd_json::static_cast_u64">static_<wbr>cast_<wbr>u64</a></div><div class="desc docblock-short">static cast to an u64</div></li><li><div class="item-name"><a class="macro" href="macro.stry.html" title="macro simd_json::stry">stry</a></div><div class="desc docblock-short">FROM serde-json
We only use our own error type; no need for From conversions provided by the
standard library’s try! macro. This reduces lines of LLVM IR by 4%.</div></li><li><div class="item-name"><a class="macro" href="macro.unlikely.html" title="macro simd_json::unlikely">unlikely</a></div><div class="desc docblock-short">possible compiler hint that a branch is unlikely</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Buffers.html" title="struct simd_json::Buffers">Buffers</a></div><div class="desc docblock-short">A struct to hold the buffers for the parser.</div></li><li><div class="item-name"><a class="struct" href="struct.Deserializer.html" title="struct simd_json::Deserializer">Deserializer</a></div><div class="desc docblock-short">Deserializer struct to deserialize a JSON</div></li><li><div class="item-name"><a class="struct" href="struct.Error.html" title="struct simd_json::Error">Error</a></div><div class="desc docblock-short">Parser error</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.ErrorType.html" title="enum simd_json::ErrorType">Error<wbr>Type</a></div><div class="desc docblock-short">Error types encountered while parsing</div></li><li><div class="item-name"><a class="enum" href="enum.Implementation.html" title="enum simd_json::Implementation">Implementation</a></div><div class="desc docblock-short">Supported implementations</div></li><li><div class="item-name"><a class="enum" href="enum.StaticNode.html" title="enum simd_json::StaticNode">Static<wbr>Node</a></div><div class="desc docblock-short">Static tape node</div></li><li><div class="item-name"><a class="enum" href="enum.ValueType.html" title="enum simd_json::ValueType">Value<wbr>Type</a></div><div class="desc docblock-short">Types of JSON values</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.SIMDINPUT_LENGTH.html" title="constant simd_json::SIMDINPUT_LENGTH">SIMDINPU<wbr>T_<wbr>LENGTH</a></div><div class="desc docblock-short">It’s 64 for all (Is this correct?)</div></li><li><div class="item-name"><a class="constant" href="constant.SIMDJSON_PADDING.html" title="constant simd_json::SIMDJSON_PADDING">SIMDJSO<wbr>N_<wbr>PADDING</a></div><div class="desc docblock-short">The maximum padding size required by any SIMD implementation</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.fill_tape.html" title="fn simd_json::fill_tape">fill_<wbr>tape</a></div><div class="desc docblock-short">Fills a already existing tape from the input for later consumption</div></li><li><div class="item-name"><a class="fn" href="fn.to_tape.html" title="fn simd_json::to_tape">to_tape</a></div><div class="desc docblock-short">Creates a tape from the input for later consumption</div></li><li><div class="item-name"><a class="fn" href="fn.to_tape_with_buffers.html" title="fn simd_json::to_tape_with_buffers">to_<wbr>tape_<wbr>with_<wbr>buffers</a></div><div class="desc docblock-short">Creates a tape from the input for later consumption</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Result.html" title="type simd_json::Result">Result</a></div><div class="desc docblock-short">simd-json Result type</div></li></ul></section></div></main></body></html>